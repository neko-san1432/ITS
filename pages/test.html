<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WASD Controlled Player</title>
  <style>
    /* Play Area */
    #play-area {
      position: relative;
      width: 500px;
      height: 500px;
      border: 2px solid black;
      margin: 20px auto;
      background: lightgray;
      overflow: hidden;
    }

    /* Obstacles */
    .obstacle {
      position: absolute;
      width: 50px;
      height: 50px;
      background: red;
    }

    /* Player */
    #player {
      position: absolute;
      width: 30px;
      height: 30px;
      background: green;
      top: 250px;
      left: 250px;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <!-- Play Area -->
  <div id="play-area">
    <div class="obstacle" style="top: 50px; left: 100px;"></div>
    <div class="obstacle" style="top: 200px; left: 150px;"></div>
    <div class="obstacle" style="top: 350px; left: 300px;"></div>
    <div id="player"></div>
  </div>

  <script>
    const player = document.getElementById('player');
    const obstacles = document.querySelectorAll('.obstacle');
    const playArea = document.getElementById('play-area');

    // Player movement speed
    const PLAYER_SPEED = 5;

    // Keep track of player movement
    let movement = { x: 0, y: 0 };

    // Listen for key presses to control movement
    document.addEventListener('keydown', (event) => {
      if (event.key === 'w') movement.y = -PLAYER_SPEED; // Up
      if (event.key === 's') movement.y = PLAYER_SPEED;  // Down
      if (event.key === 'a') movement.x = -PLAYER_SPEED; // Left
      if (event.key === 'd') movement.x = PLAYER_SPEED;  // Right
    });

    // Stop movement when key is released
    document.addEventListener('keyup', (event) => {
      if (['w', 's'].includes(event.key)) movement.y = 0;
      if (['a', 'd'].includes(event.key)) movement.x = 0;
    });

    // Move player and check for collisions
    function movePlayer() {
      const playerRect = player.getBoundingClientRect();
      const playAreaRect = playArea.getBoundingClientRect();

      const nextX = Math.min(
        Math.max(player.offsetLeft + movement.x, 0),
        playArea.offsetWidth - player.offsetWidth
      );

      const nextY = Math.min(
        Math.max(player.offsetTop + movement.y, 0),
        playArea.offsetHeight - player.offsetHeight
      );

      // Check for collisions with obstacles
      let collision = false;
      obstacles.forEach((obstacle) => {
        const obstacleRect = obstacle.getBoundingClientRect();
        if (
          nextX < obstacleRect.left - playAreaRect.left + obstacle.offsetWidth &&
          nextX + player.offsetWidth > obstacleRect.left - playAreaRect.left &&
          nextY < obstacleRect.top - playAreaRect.top + obstacle.offsetHeight &&
          nextY + player.offsetHeight > obstacleRect.top - playAreaRect.top
        ) {
          collision = true;
        }
      });

      if (!collision) {
        player.style.left = `${nextX}px`;
        player.style.top = `${nextY}px`;
      }
    }

    // Update the player's position at regular intervals
    setInterval(movePlayer, 16);
  </script>
</body>
</html>